(()=>{"use strict";const e={ru:{reg:["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","&bsol;","Del","Caps","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","⇧","Shift","Ctrl","Win","Alt","Space","Alt","⇦","⇩","⇨","Ctrl"],shift:["ё","!",'"',"№",";","%",":","?","*","(",")","_","+","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","&sol;","Del","Caps","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",",","⇧","Shift","Ctrl","Win","Alt","Space","Alt","⇦","⇩","⇨","Ctrl"]},eng:{reg:["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","&bsol;","Del","Caps","a","s","d","f","g","h","j","k","l",";","&apos;","Enter","Shift","z","x","c","v","b","n","m",",",".","&sol;","⇧","Shift","Ctrl","Win","Alt","Space","Alt","⇦","⇩","⇨","Ctrl"],shift:["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","{","}","&vert;","Del","Caps","a","s","d","f","g","h","j","k","l",":",'"',"Enter","Shift","z","x","c","v","b","n","m","&#60;","&#62;","?","⇧","Shift","Ctrl","Win","Alt","Space","Alt","⇦","⇩","⇨","Ctrl"]}},t=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"];function a(e,t){document.querySelector(`.keyboard__${e}-reg`).classList.remove("keyboard_visible"),document.querySelector(`.keyboard__${e}-shift`).classList.remove("keyboard_visible"),document.querySelector(`.keyboard__${e}-reg`).classList.add("keyboard_hidden"),document.querySelector(`.keyboard__${e}-shift`).classList.add("keyboard_hidden"),document.querySelector(`.keyboard__${t}-reg`).classList.remove("keyboard_hidden"),document.querySelector(`.keyboard__${t}-reg`).classList.add("keyboard_visible"),document.querySelector(`.keyboard__${t}-shift`).classList.remove("keyboard_visible"),document.querySelector(`.keyboard__${t}-shift`).classList.add("keyboard_hidden")}!function(){const e=document.createElement("header"),t=document.createElement("div"),a=document.createElement("h1");e.className="header",t.className="wrapper",a.className="header__title",a.innerHTML="Виртуальная клавиатура",t.appendChild(a),e.appendChild(t);const r=document.createElement("main"),s=document.createElement("div"),i=document.createElement("textarea");i.className="main__textarea",s.appendChild(i);const o=document.createElement("div");o.className="keyboard",o.setAttribute("id","keyboard"),s.appendChild(o);const c=document.createElement("section"),n=document.createElement("p"),d=document.createElement("p");c.className="info",s.className="wrapper",n.className="info__description",d.className="info__language",n.innerHTML="Клавиатура создана в операционной системе Windows 11",d.innerHTML="Для переключения языка: левые <span>ctrl + shift</span>",c.appendChild(n),c.appendChild(d),s.appendChild(c),r.appendChild(s),document.body.appendChild(e),document.body.appendChild(r)}(),function(){const a={elements:{main:null,keysContainer:null,keys:[]},properties:{value:"",caret:0,capsLock:!1,shift:!1},init(){this.elements.main=document.querySelector(".keyboard"),this.elements.main.appendChild(this.createKeys()),this.elements.keys=this.elements.main.querySelectorAll(".keyboard__key_letter"),document.querySelector(".main__textarea").addEventListener("input",(e=>{this.properties.value=e.target.value}))},fillKeyboard(e,...a){const r=document.createDocumentFragment(),s=document.createElement("div"),i=document.querySelector(".main__textarea");let o=0;return s.classList.add(...a),e.forEach((e=>{const a=document.createElement("button");switch(a.setAttribute("type","button"),a.classList.add("down","keyboard__key"),e){case"Tab":a.classList.add("keyboard__key_special","keyboard__key_tab"),a.textContent+=e,a.addEventListener("click",(()=>{i.focus(),this.printTab()}));break;case"Backspace":a.classList.add("keyboard__key_special","keyboard__key_backspace"),a.textContent+=e,a.addEventListener("click",(()=>{i.focus(),this.backspaceSimb()}));break;case"Caps":a.classList.add("keyboard__key_special","keyboard__key_caps"),a.textContent+=e,a.addEventListener("click",(()=>{i.focus(),this.toogleCaplsLock()}));break;case"Del":a.classList.add("keyboard__key_special","keyboard__key_del"),a.textContent+=e,a.addEventListener("click",(()=>{i.focus(),this.deleteSimb(),this.print()}));break;case"Enter":a.classList.add("keyboard__key_special","keyboard__key_enter"),a.textContent+=e,a.addEventListener("click",(()=>{i.focus(),this.enterSimb()}));break;case"Space":a.classList.add("keyboard__key_special","keyboard__key_space"),a.addEventListener("click",(()=>{i.focus(),this.spaceSimb()}));break;case"Shift":a.classList.add("keyboard__key_special","keyboard__key_shift"),a.textContent+=e,a.addEventListener("mousedown",(()=>{this.toogleCaplsLock(!0),this.toogleShift()})),a.addEventListener("mouseup",(()=>{this.toogleCaplsLock(!0),this.toogleShift()}));break;case"Alt":a.classList.add("keyboard__key_special","keyboard__key_alt"),a.textContent+=e;break;case"Win":a.classList.add("keyboard__key_special","keyboard__key_win"),a.textContent+=e;break;case"Ctrl":a.classList.add("keyboard__key_special","keyboard__key_ctrl"),a.textContent+=e;break;default:a.innerHTML=e,a.classList.add("keyboard__key_letter"),a.addEventListener("click",(()=>{i.focus();const e=this.properties.capsLock,t=a.innerHTML,r=e?t.toUpperCase():t.toLowerCase();this.properties.value=this.createNewValue(this.properties.caret,r),this.properties.caret+=1,this.print()}))}a.classList.add(t[o]),o+=1,r.appendChild(a)})),s.appendChild(r),s},createKeys(){const t=document.createDocumentFragment();return Object.keys(e).forEach((a=>{if(localStorage.getItem("lang")===a){const r=this.fillKeyboard(e[a].reg,"keyboard_visible",`keyboard__${a}`,`keyboard__${a}-reg`),s=this.fillKeyboard(e[a].shift,"keyboard_hidden",`keyboard__${a}`,`keyboard__${a}-shift`);t.appendChild(r),t.appendChild(s)}else{const r=this.fillKeyboard(e[a].reg,"keyboard_hidden",`keyboard__${a}`,`keyboard__${a}-reg`),s=this.fillKeyboard(e[a].shift,"keyboard_hidden",`keyboard__${a}`,`keyboard__${a}-shift`);t.appendChild(r),t.appendChild(s)}})),t},createNewValue(e,t){const a=this.properties.value;let r=a.substring(0,e)+t;return r+=a.substring(e,a.length),r},print(){document.querySelector(".main__textarea").value=this.properties.value,document.querySelector(".main__textarea").setSelectionRange(this.properties.caret,this.properties.caret)},toogleCaplsLock(){this.properties.capsLock=!this.properties.capsLock;const e=document.querySelectorAll(".CapsLock"),t=document.querySelector(".keyboard__key_shift");e.forEach((e=>{t||(this.properties.capsLock?e.classList.add("keyboard__key_active"):e.classList.remove("keyboard__key_active"))})),this.elements.keys.forEach((e=>{const t=this.properties.capsLock;e.textContent=t?e.textContent.toUpperCase():e.textContent.toLowerCase()}))},toogleShift(){const e=localStorage.getItem("lang");document.querySelector(".main__textarea").focus(),this.properties.shift=!this.properties.shift,this.properties.shift?(document.querySelector(`.keyboard__${e}-reg`).classList.remove("keyboard_visible"),document.querySelector(`.keyboard__${e}-reg`).classList.add("keyboard_hidden"),document.querySelector(`.keyboard__${e}-shift`).classList.add("keyboard_visible"),document.querySelector(`.keyboard__${e}-shift`).classList.remove("keyboard_hidden")):(document.querySelector(`.keyboard__${e}-reg`).classList.add("keyboard_visible"),document.querySelector(`.keyboard__${e}-reg`).classList.remove("keyboard_hidden"),document.querySelector(`.keyboard__${e}-shift`).classList.remove("keyboard_visible"),document.querySelector(`.keyboard__${e}-shift`).classList.add("keyboard_hidden"))},checkcaret(){const e=document.querySelector(".main__textarea").selectionStart;e!==this.properties.caret&&(this.properties.caret=e)},backspaceSimb(){const e=this.properties.caret,t=this.properties.value;if(0!==e){const a=t.slice(0,e-1)+t.slice(e);this.properties.caret-=1,this.properties.value=a,this.print()}},deleteSimb(){const e=this.properties.caret,t=this.properties.value,a=t.slice(0,e)+t.slice(e+1);this.properties.value=a,this.print()},enterSimb(){this.properties.value=this.createNewValue(this.properties.caret,"\n"),this.properties.caret+=1,this.print()},spaceSimb(){this.properties.value=this.createNewValue(this.properties.caret," "),this.properties.caret+=1,this.print()},printTab(){this.properties.value=this.createNewValue(this.properties.caret,"    "),this.properties.caret+=4,this.print()},printArrow(e){this.properties.value=this.createNewValue(this.properties.caret,e),this.properties.caret+=1,this.print()},printSimb(e){const t=document.querySelector(".CapsLock").classList.contains("keyboard__key_active"),a=this.properties.shift,r=t&&!a||!t&&a?e.toUpperCase():e.toLowerCase();this.properties.value=this.createNewValue(this.properties.caret,r),this.properties.caret+=1,this.print()}};window.addEventListener("DOMContentLoaded",(()=>{a.init();const e=document.querySelector(".main__textarea");e.focus(),e.addEventListener("select",a.checkcaret.bind(a)),e.addEventListener("selectstart",a.checkcaret.bind(a)),e.addEventListener("input",a.checkcaret.bind(a)),e.addEventListener("cut",a.checkcaret.bind(a)),e.addEventListener("paste",a.checkcaret.bind(a)),e.addEventListener("click",a.checkcaret.bind(a)),e.addEventListener("mousedown",a.checkcaret.bind(a)),e.addEventListener("keypress",a.checkcaret.bind(a)),e.addEventListener("keydown",(e=>{a.checkcaret.bind(a),-1!==["ControlLeft","ControlRight","AltLeft","AltRight"].indexOf(e.coded)||e.preventDefault()})),document.addEventListener("keydown",(e=>{const t=String(e.code),r=-1!==["Backspace","Enter","ControlLeft","ControlRight","AltLeft","AltRight","Tab","Delete","MetaLeft"].indexOf(t);switch(t){case"CapsLock":a.toogleCaplsLock();break;case"ShiftLeft":case"ShiftRight":a.toogleShift(),a.toogleCaplsLock();break;case"ArrowUp":a.printArrow("⇧");break;case"ArrowDown":a.printArrow("⇩");break;case"ArrowLeft":a.printArrow("⇦");break;case"ArrowRight":a.printArrow("⇨");break;case"Tab":a.printTab();break;case"Backspace":a.backspaceSimb();break;case"Delete":a.deleteSimb();break;case"Enter":a.enterSimb();break;case"Space":a.spaceSimb();break;default:if(!r){const e=document.querySelector(".keyboard__key_shift ").classList.contains("keyboard__key_active")?"-shift":"-reg",r=document.querySelector(`.keyboard__${localStorage.getItem("lang")}${e}`).querySelector(`.${t}`);"&lt;"===r.innerHTML?a.printSimb("<"):"&gt;"===r.innerHTML?a.printSimb(">"):"&amp;"===r.innerHTML?a.printSimb("&"):a.printSimb(r.innerHTML)}}})),document.addEventListener("keyup",(e=>{switch(String(e.code)){case"ShiftLeft":case"ShiftRight":a.toogleShift(),a.toogleCaplsLock(!0)}}))}))}(),localStorage.getItem("lang")||localStorage.setItem("lang","eng"),document.addEventListener("keydown",(e=>{const t=`.${e.code}`;document.querySelectorAll(t).forEach((e=>{".CapsLock"===t&&function(e){return e.classList.contains("keyboard__key_active")}(e)?e.classList.remove("keyboard__key_active"):e.classList.add("keyboard__key_active")}));const r=document.querySelector(".ShiftLeft").classList.contains("keyboard__key_active"),s=document.querySelector(".ControlLeft").classList.contains("keyboard__key_active");r&&s&&("eng"===localStorage.getItem("lang")?(a("eng","ru"),localStorage.setItem("lang","ru")):(a("ru","eng"),localStorage.setItem("lang","eng")))})),document.addEventListener("keyup",(e=>{const t=`.${e.code}`;document.querySelectorAll(t).forEach((e=>{".CapsLock"!==t&&e.classList.remove("keyboard__key_active")}))}))})();